# Двигатели
## Что есть двигатель?
Двигатели - это модули класса **"Engine"**. Такие модели позволяют создавать вектор тяги - силу, действующую на объект, на который установлен двигатель.

В текущей версии двигатель сильно упрощён:
  - имеет единственный параметр - **максимальная сила тяги**, выраженная в Ньютонах;
  - может изменять свой вектор тяги **моментально** как по силе, так и по направлению;
  - запас топлива неограничен;
  - топливо имеет нулевую массу, т.е. работе двигателя не влияет на массу корабля.

С развитием игры и повышением уровня сложности, все эти упрощения будут постепенно устраняться.

## Интерфейс IEngine
Основной интерфейс управления двигателем - **IEngine**:
```protobuf
message IEngine
{

  message GetSpecification {}
  message Specification {
    uint32 maxThrust = 1;
  }
  
  message SetThrust {
    double x           = 1;
    double y           = 2;
    uint32 thrust      = 4;
    uint32 duration_ms = 5;
  }
  
  message GetThrust {}
  
  message CurrentThrust {
    double x      = 1;
    double y      = 2;
    uint32 thrust = 4;
  }

  oneof choice {
    GetSpecification getSpecification = 1;
    SetThrust        setThrust        = 2;
    GetThrust        getThrust        = 3;
    
    Specification    specification    = 21;
    CurrentThrust    currentThrust    = 22;
  }
}
```
## Как получить параметры двигателя?
Чтобы получить параметры двигателя, нужно отправить запрос **GetSpecification**. В ответ двигатель отправит сообщение **Specification**, в котором передаются следующие параметры:

| Параметр   | Ед. изм. | Возможные значения | Описание                                     |
|------------|----------|--------------------|----------------------------------------------|
| max_thrust | H        | >= 0               | Максимально допустимое значение вектора тяги |

## Как управлять вектором тяги двигателя?
Для того, чтобы установить вектор тяги двигателя, нужно отправить команду **SetThrust**:
```protobuf
message SetThrust {
  double x           = 1;
  double y           = 2;
  uint32 thrust      = 4;
  uint32 duration_ms = 5;
}
```
, где:
  - **x** и **y** задают **направление** вектора тяги;
  -  **thrust** определяет силу вектора тяги, выраженную в Ньютонах; если указанная сила превышает максимально возможную для данного двигателя, то ~~двигатель взрывается~~ будет выставлена максимально возможная;
  - **duration_ms** - время работы двигателя в миллисекундах; если указать 0, то время работы не ограничено.

Для того, чтобы получить текущее значение вектора тяги, нужно отправить запрос **GetThrust**. В ответ поступит сообщение:
```protobuf
message CurrentThrust {
  double x      = 1;
  double y      = 2;
  uint32 thrust = 4;
}
```
, где:
  - **x, y** - направление векторf тяги;
  - **thrust**- сила вектора тяги (в Ньютонах).
